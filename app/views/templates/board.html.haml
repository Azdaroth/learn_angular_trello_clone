.row{"ng-controller" => "BoardsController", "ng-init" => "init()"}
  %h1
    {{ board.name }}

  .container
    = simple_form_for :list, url: "", method: nil, html: { class: "col-lg-8", name: "listForm", "ng-submit" => "createList()" } do |f|
      = f.input :name, label: "Name", input_html: { "ng-model" => "newList.name", "required" => "" }
      %div{"ng-show" => "listForm['list[name]'].$dirty && listForm['list[name]'].$invalid" }
        %span.has-error{"ng-show" => "listForm['list[name]'].$error.required"}
          Name is required.

      .form-group
        = f.button :submit, "Add", class: "btn btn-primary", "ng-disabled" => "listForm.$invalid"  

  .container
    %ul{"ui-sortable" => "sortableOptions", "ng-model" => "lists"}
      %li.board.col-lg-3{"ng-repeat" => "list in lists | orderBy: 'priority'" }
        %p
          priority {{ list.priority }}
          %a{href: "#", "editable-text" => "list.name", "onbeforesave" => "updateList(list.id, {name: $data})"}
            {{ list.name || 'empty' }}
          %span.label.label-danger{"ng-click" => "destroyList(list.id)"}        
            Remove
        .cards{"ng-controller" => "CardsController", "ng-init" => "initWithService(list.board_id, list.id)"}
          %ul{"ui-sortable" => "sortableOptions", "ng-model" => "cards"}
            %li{"ng-repeat" => "card in cards | orderBy: 'priority'" }
              %a{href: "#", "editable-text" => "card.name", "onbeforesave" => "updateCard(card.id, {name: $data})"}
                {{ card.name || 'empty' }}
              {{ card.priority }}
              %span.label.label-danger{"ng-click" => "destroyCard(card.id)"}        
                Remove
          = simple_form_for :card, url: "", method: nil, html: { class: "col-lg-8", name: "cardForList-list.id", "ng-submit" => "createCard()" } do |f|
            = f.input :name, label: "Name", input_html: { "ng-model" => "newCard.name", "required" => "" }